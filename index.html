<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<META name="author" content="OLEG">
</META>
<title>Пример</title>



<!--<form onsubmit="FromTo(A.value, B.value)">
  <label for="A">Откуда </label><input name="A"><br>
  <label for="B">Куда</label><input name="B"><br>
  <input value="Send" type="submit"> код формы для отправки
</form>-->


<script type="text/javascript">

  var pereshetka=0;

oAJAX = new XMLHttpRequest();
oAJAX.open("GET","data.json", true);
oAJAX.onreadystatechange = function () {
  var oData;
  //const accessToInner = outerData();

    var oOutput = document.getElementById("info");
    if ((oAJAX.readyState == 4) && (oAJAX.status == 200)) {
        var oData = JSON.parse(oAJAX.responseText);

function outerData(){
          if(oData.convert_to === "ft"){pereshetka = oData.value * 3.2808; 
                      console.log('GGGGGGGGGG',pereshetka);

          }
          }
        //const result = {unit: oData.convert_to, value: convertFunction(oData.distance.value,  oData.distance.unit, oData.convert_to)}

        {
          //console.log(' Hello', result);
            var oP;
            var Dlinacount = oData.distance.lenght;
            for (i in oData.distance ){
              console.log(oData.distance[i]);
              console.log('HERNA', oData.distance.value);

              if (!oData.distance.value) {
                 break;
                }

              else{
                console.log(oData.distance)
                oP = document.createElement ("p");
            console.log(oData.distance[i])
            oP.textContent = oData.distance.unit + "   " + oData.distance.value; 
            oOutput.appendChild(oP);
              }

          }
      } 
           // let recount = outerData(pereshetka);
            let mygav = outerData();
            console.log(mygav);

      //console.log(accessToInner);

    }
}

oAJAX.send();




/*var workersTable = document.getElementById('dist'),
    info = document.getElementById('info'),
    requestURL = 'data.json', //файл находится в той же папке, что и html-файл, который к нему обращается
    request = new XMLHttpRequest();

request.open('GET', requestURL);
request.onload = function(e) {
    if (request.readyState === 4) {
        if (request.status === 200) {
            console.log(request.response);
            var dataTable = JSON.parse(request.responseText);
            getTableInfo(dataTable);
            console.log(dataTable);
        } else {
            console.error(request.statusText);
        }
    }
};
request.onerror = function(e) {
    console.error(request.statusText);
};
request.send();

function getTableInfo(data) {
    info.innerHTML = `<h2>Distance in metr: ${data.value}</h2> 
         <p>Переводим в: ${data.convert_to}</p>`;
    //let headerTr = document.createElement('tr');
    //headerTr.innerHTML = `<th>ФИО</th><th>Должность</th><th>Email</th>
                        // <th>Телефон</th><th>Приемные дни/часы</th>`;
    //workersTable.appendChild(headerTr);
 /* console.log(Array.isArray(data.workers));
    data.workers.forEach(function(elem) {
        let tr = document.createElement('tr');
        tr.innerHTML = `<td>${elem.name}</td><td>${elem.position}</td>
              <td>${elem.email}</td><td>${elem.phone}</td>
              <td>${elem.active}</td>`;
        workers.appendChild(tr);
    });
}


	let innerDist = document.querySelector(".Dist"); 

	
let mixData = [{distance: {"unit":"m","value": 0.5}, "convert_to": "ft"},{distance: {"unit":"cm","value": 50}, "convert_to": "yard"}];
/*var xhr = new XMLHttpRequest();
var url = "/masiv.JSON";
  
// Вызываем при изменении атрибута readyState
xhr.onreadystatechange = function() {
  // Проверяем, выполнен ли запрос на получение
  if (xhr.readyState == 4 && xhr.status == 200) {
    // Разбираем строку JSON
    var jsonData = JSON.parse(xhr.responseText); 
    // Вызываем showArtists() и передаём разобранный JSON
    showData(jsonData);
  }
};


xhr.open("GET", url, true);
xhr.send();

function showData(data) {
  var output = "<ul>"; // Открываем список
  var i;

  // Перебираем исполнителей и добавляем их как пункты списка
  for (var i in data.artists) {
    output += "<li>" + data.artists[i].artistname + " (Родился: " + data.artists[i].born + ")</li>"; 
  
  
  output += "</ul>"; // Закрываем список
  // Выводим данные в элементе artistlist
  document.getElementById("Dist").innerHTML = output;
}
*/

</script>




</head>
<script type="text/javascript">
//console.log(mixData[1].convert_to) проверка вывода элементов джсон
//console.log(innerDist);


/*let animals = [{
    name: "Mikky",
    type: 'dog',
    age: 3,
    stock: {
        price: 13.9,
        isSold: true,
        acsessories: ['ball']
    }
}, {
    name: "Neon",
    type: 'cat',
    age: .5,
    stock: {
        price: 59.7,
        isSold: false,
        acsessories: null
    }
}];
document.write('<p>' + JSON.stringify(mixData) + '</p>');
*/
</script>
        
    <section>
    </section>
    <body>

        <!--<input type="text" placeholder="Distance" class="Dist" />-->

        <div id="info"></div>
        <table id="dist"></table>


    </body>

</html>
